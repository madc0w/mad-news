"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[779],{84718:function(e,t,n){n.d(t,{Z:function(){return b}});var a=n(27378),r=n(68442),c=n(62753),o=n(65779),l=n(28944),s=n(96445),i=n(83933),m=e=>{var{event:t,assetUri:n,assetTitle:a,metadata:r}=e;return{container:"Comments",label:t,variant:"",metadata:r,source:n.split("/")[1],url:a}};function u(e,t,n,a,r,c,o){try{var l=e[c](o),s=l.value}catch(i){return void n(i)}l.done?t(s):Promise.resolve(s).then(a,r)}var d=(0,r.default)("p",{target:"ec5dr224",label:"MessageContainer"})("margin:",c.SPACING_2," 0;"),v=(0,r.default)(d,{target:"ec5dr223",label:"EnvironmentWarningHeader"})({name:"hwfcu5",styles:"color:red"}),f=(0,r.default)("iframe",{target:"ec5dr222",label:"StylediFrame"})({name:"qpq9k7",styles:"width:200px;min-width:100%;overflow:hidden"}),h=(0,r.default)("span",{target:"ec5dr221",label:"IconContainer"})({name:"1bo2wjz",styles:"display:inline-block;width:1rem;height:1rem;vertical-align:-0.125em"}),p=(0,r.default)("div",{target:"ec5dr220",label:"CommentsAnchor"})("position:relative;top:-",c.SPACING_4,";"),g=function(){var e,t=(e=function*(e){return(0,i.G)(e)},function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function o(e){u(c,a,r,o,l,"next",e)}function l(e){u(c,a,r,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),E=()=>a.createElement(d,null,a.createElement(h,null,a.createElement(l.Z,{type:"labels:warning"})),"Â There was a problem loading the comments. Please try again."),w=()=>a.createElement(v,null,"You are viewing a live comments forum, do not post, reply or rate comments!"),b=e=>{var{assetUri:t,assetTitle:n,meta:{env:r,host:c,location:l}}=e,u="comments",d="comp-comments-button",v=l.hash==="#".concat(u)||l.hash==="#".concat(d),h="live"!==r?(0,o.Ph)(l.search,"morph_env"):null,b="live"!==r?(0,o.Ph)(l.search,"renderer_env"):null,_="https://".concat(c).concat(t),[C,y]=(0,a.useState)(!1),[S,T]=(0,a.useState)(!1),[A,k]=(0,a.useState)(!1),[P,U]=(0,a.useState)(0),[L,R]=(0,a.useState)(!0),[N,D]=(0,a.useState)(1),I=(0,a.useRef)(null),H=(0,a.useRef)(null),x=()=>{D(N+1),T(!1),y(!0)};(0,a.useEffect)((()=>{var e=m({event:"comments-component",assetUri:t,assetTitle:n,metadata:{ANC:v}});window.Reverb?g(e):setTimeout((()=>{g(e)}),2e3)}),[t,n,v]),(0,a.useEffect)((()=>{v&&y(!0)}),[v]);var O,F="".concat("localhost"===r?"https://www.test.bbc.co.uk/":"/","comments/embed").concat(t,"?embeddingPageUri=").concat(_,"%23").concat(u,"&embeddingPageTitle=").concat(encodeURIComponent(n)).concat(h?"&morph_env=".concat(h):"").concat(b?"&renderer_env=".concat(b):"");return O=(0,a.useCallback)((e=>{var{commentsIFrameHeight:a,commentsErrorCode:r,commentsScrollToTop:c}=e.data;a&&(0===P&&I.current.focus(),U("".concat(a,"px"))),r&&(g(m({event:"comments-component-error",assetUri:t,assetTitle:n,metadata:{ANC:v,HSC:r,TRY:N-1}})),T(!0),y(!1)),c&&H.current.scrollIntoView()}),[P,n,t,v,N]),(0,a.useEffect)((()=>(window.addEventListener("message",O),()=>window.removeEventListener("message",O))),[O]),(0,a.useEffect)((()=>{var e=C&&0===P,t=e||!C;k(e),R(t)}),[C,P,A]),a.createElement(a.Fragment,null,a.createElement(p,{id:u,ref:H}),a.createElement(p,{id:d}),a.createElement("div",{"aria-live":"polite"},"live"===h&&a.createElement(w,null),L&&a.createElement(i.f,{tracking:m({event:"view-comments",assetUri:t,assetTitle:n,metadata:{ANC:v,TRY:N}})},(e=>{var{trackRef:t}=e;return a.createElement(s.Z,{iconType:A?"playback-avkx:loading":"participate:comments",trackRef:t,onClick:x},"View comments")})),S&&a.createElement(E,null),C&&a.createElement(f,{src:F,title:"Comments",height:P,ref:I,scrolling:"no"})))}}}]);