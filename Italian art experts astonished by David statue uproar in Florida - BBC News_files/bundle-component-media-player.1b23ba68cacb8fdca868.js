"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2726],{67503:function(e,t,r){r.d(t,{Z:function(){return W}});var n=r(48193),a=r(68442),i=r(36788),o=r(27378),l=r(28944),u=r(44381),d={localhostError:"MediaPlayer is not available on localhost. Try localhost.bbc.com"},c={default:{NO_JS_REASON:"This video can not be played",NO_JS_MESSAGE:"To play this video you need to enable JavaScript in your browser."},cy:{NO_JS_REASON:"Methu chwarae'r fideo",NO_JS_MESSAGE:"I wylio'r fideo yma, mae'n rhaid galluogi JavaScript yn y porwr."},gd:{NO_JS_REASON:"Cha ghabh am bhideo seo cluiche",NO_JS_MESSAGE:"Feumar cead a thoirt do JavaScript sa bhrabhsair agad 'son am bhideo fhaicinn."}},s=r(80734),m=()=>s.Z&&window.location.hostname,p=r(77283),y=r(50378),v=r(51396),f=r(73084);function h(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(d){return void r(d)}l.done?t(u):Promise.resolve(u).then(n,a)}var g={playing:"started",pause:"paused",playlistEnded:"ended"},b=Object.keys(g),w=function(){var e,t=(e=function*(e){var{uasClient:t,smpEventName:r,currentTime:n,hostname:a,activityData:i}=e;if(b.includes(r)&&(e=>(null==e?void 0:e.resourceDomain)&&(null==e?void 0:e.resourceId)&&(null==e?void 0:e.resourceType)&&(null==e?void 0:e.actionContext)&&(null==e?void 0:e.url))(i)&&(0,v.Z)()&&(0,f.w$)()){var o=(0,p.Z)().withAction(g[r]).withResourceDomain(i.resourceDomain).withResourceId(i.resourceId).withResourceType(i.resourceType).withActionContext("".concat(i.actionContext,"#").concat(Math.floor(n))).withUrl("https://".concat(a).concat(i.url)).build();try{yield t.post(o)}catch(l){console.error(l)}}},function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){h(i,n,a,o,l,"next",e)}function l(e){h(i,n,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),E=r(58760);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(d){return void r(d)}l.done?t(u):Promise.resolve(u).then(n,a)}function _(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){S(i,n,a,o,l,"next",e)}function l(e){S(i,n,a,o,l,"throw",e)}o(void 0)}))}}var T=["initialised","continuousPlay.play","continuousPlayCountdownStarted","playing","pause","ended","fullscreenEnter","fullscreenExit","playlistEnded","playlistStopped","mediaItemChanged"],j=(0,a.default)("div",{target:"e1h75hkw3",label:"MediaPlayerWrapper"})(""),C=(0,a.default)("div",{target:"e1h75hkw2",label:"Container"})("height:",(e=>{var{height:t}=e;return t}),";padding-bottom:",(e=>{var{height:t}=e;return t?"0":"".concat(56.25,"%;")}),";width:100%;color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";background-color:",(e=>{var{theme:t}=e;return t.colourPalette.midground}),";html.no-js &{display:none;}"),x=(0,a.default)("div",{target:"e1h75hkw1",label:"Error"})({name:"19997jf",styles:"display:flex;justify-content:center;align-items:center;padding:32px"}),D=(0,a.default)("div",{target:"e1h75hkw0",label:"LogoIconWrapper"})("width:",30,"%;padding-top:",(e=>{var{height:t}=e;return"".concat(t?4.180743243243244:23.868243243243246,"%;")}),";margin:0 auto;color:",(e=>{var{theme:t}=e;return t.colourPalette.primary}),";opacity:0.2;"),N=function(){var e=_((function*(e){if(!e.isAdvertisingEnabled)return!1;var t=e=>e.items.some((e=>e.isAdvertisingAllowed)),r=t(e),n=e.continuousPlay&&e.continuousPlay.mediaList&&e.continuousPlay.mediaList.some(t);return!(!r&&!n)&&(window.dotcom&&!window.dotcom.ads&&(yield new Promise((e=>setTimeout(e,200)))),window.dotcom&&window.dotcom.ads&&(yield window.dotcom.ads.enabled()))}));return function(t){return e.apply(this,arguments)}}(),L=e=>{var{analytics:t}=e;return t&&t.page?t.page.name:void 0},R=e=>{var{idType:t}=e;return"serviceID"===t||void 0},k=e=>{var{items:t,analytics:r}=e;if(r&&0!==t.length){var{page:{destination:n,producer:a}}=r;return{clipPID:t[0].id,destination:n,producer:a}}},J=e=>e?"allowed":void 0,M=(e,t)=>{var r=e.items[0];if(r){var{id:n,idType:a="vpid",live:i,holdingImageUrl:o,title:l,duration:u,durationFormatted:d,kind:c,guidance:s,isEmbeddingAllowed:m,isAdvertisingAllowed:p}=r,y=[{[a]:n,kind:c,live:i,duration:u}];return t&&p&&y.unshift({kind:"advert"}),{title:l,holdingImageURL:o,guidance:s,date:d,embedRights:J(m),items:y,simulcast:R(r)}}},U=e=>{var{media:t,onwardJourneyOptions:r,hasAds:n}=e;if(t.continuousPlay&&t.continuousPlay.mediaList&&t.continuousPlay.mediaList.length>1)return((e,t,r)=>({html:"name:onwardJourney.js",data:{name:"smp.plugin.continuousplay.playlistSetChanged",data:O({items:e.map((e=>({playlist:M(e,r),counterName:L(e),statsObject:k(e)})))},t)}}))(t.continuousPlay.mediaList,r,n)},I=e=>{var{hasAds:t,initialAdTag:r}=e;if(t)return{html:"name:dfpAds.js",data:{name:"AdsPluginParameters",data:{adTag:r}}}},K=e=>{var{unmutePluginEnabled:t}=e;return t?{html:u}:void 0},Z=(e,t,r)=>{T.forEach((r=>{e.bind(r,(e=>t({name:r,data:e})))}));var n=!1;if(e.bind("showCta",(()=>{n||(n=!0,window.performance.mark("media-player-ready-to-play"))})),e.bind("initialised",(()=>window.performance.mark("media-player-initialised"))),r){var a=function(){var t=_((function*(){var t=yield window.dotcom.ads.getAdTag();e.dispatchEvent("bbc.smp.plugins.ads.event.updateAdTag",{adTag:t})}));return function(){return t.apply(this,arguments)}}();e.bind("playlistLoaded",(()=>{a()}))}},G=e=>{var t=e.items.find((e=>e.adCampaignKeyword));return t?t.adCampaignKeyword:null},B=e=>{var t=(0,o.useRef)(e),r=(0,o.useRef)();return(0,o.useEffect)((()=>{if(t.current=e,e||(r.current=null),e&&!r.current){var n=(null==e?void 0:e.environment)||"live",a=null==e?void 0:e.apiKey;r.current=((e,t,r)=>e&&t&&r?(0,y.Z)({apiKey:r,environment:e,activityType:"plays",isDotCom:t.endsWith(".com"),tokenRefreshToggle:!0}):null)(n,m(),a)}}),[e]),[r,t]},W=e=>{var{media:t,uiOptions:r={},onwardJourneyOptions:a={},height:u=0,onStateChanged:s,onMediaChanged:p,shouldAutoplay:y,shouldDelayEmbed:v=!1,shouldPauseMedia:f=!1,forcePlaceholder:h=!1,activityData:g,experimentalShouldAutoPlayMuted:b=!1}=e,P=(0,o.useRef)(),A=(0,o.useRef)();A.current=s;var S=(0,n.V)("//emp.bbci.co.uk/emp/bump-4/bump-4"),T=(0,i.Qg)(),R=(0,o.useRef)(t.currentlyPlayingKey),J=(0,o.useRef)(t.isAdvertisingEnabled),[W,F]=B(g),H=b,Q=u<=0,V=c[T]||c.default,$="localhost"===m(),q=(0,o.useMemo)((()=>$?o.createElement(x,null,d.localhostError):null),[$]),z=(0,o.useRef)();return y&&z.current&&z.current.captureIntent(),(0,o.useEffect)((()=>{if(S&&!q&&!h&&!z.current){var e=e=>{var r,n,{name:a,data:i}=e;F.current&&w({uasClient:W.current,smpEventName:a,currentTime:null==z||null===(r=z.current)||void 0===r||null===(n=r.player)||void 0===n?void 0:n.currentTime(),hostname:m(),activityData:F.current});var o="continuousPlay.play"===a,l=i&&void 0!==i.index,u=t.continuousPlay&&t.continuousPlay.mediaList&&t.continuousPlay.mediaList.length>1;o&&l&&u&&(R.current=t.continuousPlay.mediaList[i.index].key,p&&p({index:i.index})),A.current&&A.current({name:a,data:i})},n=function(){var n=_((function*(){var n=yield N(t);if(n){var i=G(t);window.dotcom.setConfig("adCampaign",i)}var o=n?yield window.dotcom.ads.getAdTag():void 0,l=O(O({},r),{},{locale:O({lang:T},r.locale)});z.current=S.player(P.current,((e,t,r,n,a,i,o,l)=>{var u,d;return{product:"generic",plugins:{toLoad:(d={media:e,onwardJourneyOptions:r,hasAds:n,initialAdTag:a,unmutePluginEnabled:i},[U(d),I(d),K(d)].filter(Boolean))},superResponsive:o,enableToucan:e.isToucanEnabled||!1,playlistObject:M(e,n),ui:t,statsObject:k(e),counterName:L(e),externalEmbedCode:e.externalEmbedUrl?'<iframe width="400" height="500" frameborder="0" src="{url}"></iframe>':void 0,externalEmbedUrl:e.externalEmbedUrl,appName:e.smpAppName,appType:null!==(u=e.smpAppType)&&void 0!==u?u:"responsive",mediator:e.mediator,muted:i,delayEmbed:l,webcastData:e.webcastData}})(t,l,a,n,o,H,Q,v)),Z(z.current,e,n),z.current.load()}));return function(){return n.apply(this,arguments)}}();n()}}),[t,r,S,q,a,p,T,h,F,W,H,Q,v]),(0,o.useEffect)((()=>{if(!q&&z.current){var e=R.current!==t.currentlyPlayingKey,r=J.current!==t.isAdvertisingEnabled;if(e||r){var n=function(){var e=_((function*(){var e=yield N(t);z.current.loadPlaylist(M(t,e),{autoplay:y,counterName:L(t),statsObject:k(t),externalEmbedUrl:t.externalEmbedUrl}),R.current=t.currentlyPlayingKey,J.current=t.isAdvertisingEnabled}));return function(){return e.apply(this,arguments)}}();n()}else((e,t)=>{var{externalEmbedUrl:r}=e.settings();t&&t!==r&&e.settings({externalEmbedUrl:t})})(z.current,t.externalEmbedUrl);var a=function(){var e=_((function*(){if(yield N(t)){var e=G(t);window.dotcom.setConfig("adCampaign",e)}}));return function(){return e.apply(this,arguments)}}();a()}}),[q,t,y]),(0,o.useEffect)((()=>{!q&&z.current&&f&&z.current.pause()}),[q,f]),o.createElement(j,{"data-chromatic":"ignore"},o.createElement(C,{ref:P,height:u},q,!q&&o.createElement(D,{"data-testid":"bbc-logo-wrapper",height:u},o.createElement(l.Z,{type:"logo:bbc"}))),o.createElement("noscript",null,o.createElement(E.Z,{reason:V.NO_JS_REASON,message:V.NO_JS_MESSAGE,headingLevel:"2",collapseAtMobile:!0})))}}}]);